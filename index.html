<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Blynk Data</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    .box { margin: 20px; font-size: 24px; }
  </style>
</head>
<body>
  <h2>Dữ liệu từ Blynk</h2>
  <div class="box">🌡️ Nhiệt độ: <span id="temp">--</span> °C</div>
  <div class="box">💧 Độ ẩm: <span id="humi">--</span> %</div>
  <div class="box">🔋 Điện áp: <span id="volt">--</span> V</div>

  <script>
    const token = "djlxGXmIjuPjubwUqdVCMgB76av9UhNI";

    async function getData() {
      try {
        const t = await fetch(`https://blynk.cloud/external/api/get?token=${token}&v1`).then(r=>r.text());
        const h = await fetch(`https://blynk.cloud/external/api/get?token=${token}&v2`).then(r=>r.text());
        const v = await fetch(`https://blynk.cloud/external/api/get?token=${token}&v3`).then(r=>r.text());

        document.getElementById("temp").textContent = t;
        document.getElementById("humi").textContent = h;
        document.getElementById("volt").textContent = v;
      } catch (e) {
        console.error("Lỗi:", e);
      }
    }

    // Lấy dữ liệu ngay khi load
    getData();
    // Cập nhật mỗi 5 giây
    setInterval(getData, 5000);
  </script>
</body>
</html>
