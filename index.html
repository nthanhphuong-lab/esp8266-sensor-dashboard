<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ESP8266 Sensor Dashboard</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f5f8fc;
    }
    h1 {
      margin: 20px;
    }
    .gauges {
      display: flex;
      justify-content: center;
      gap: 50px;
      margin-top: 30px;
    }
    .gauge-container {
      text-align: center;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/canvas-gauges@2.1.7/gauge.min.js"></script>
</head>
<body>
  <h1>ESP8266 Sensor Dashboard</h1>

  <div class="gauges">
    <div class="gauge-container">
      <canvas id="tempGauge" width="200" height="200"></canvas>
      <div>üå° Temperature</div>
    </div>
    <div class="gauge-container">
      <canvas id="humGauge" width="200" height="200"></canvas>
      <div>üíß Humidity</div>
    </div>
    <div class="gauge-container">
      <canvas id="voltGauge" width="200" height="200"></canvas>
      <div>üîã Voltage</div>
    </div>
  </div>

  <script>
    // T·∫°o gauges
    const tempGauge = new RadialGauge({
      renderTo: 'tempGauge',
      width: 200,
      height: 200,
      units: "¬∞C",
      minValue: 0,
      maxValue: 100,
      majorTicks: ["0","20","40","60","80","100"],
      minorTicks: 2,
      strokeTicks: true,
      highlights: [
        { from: 0, to: 50, color: "rgba(0,255,0,.3)" },
        { from: 50, to: 80, color: "rgba(255,255,0,.3)" },
        { from: 80, to: 100, color: "rgba(255,30,0,.3)" }
      ],
      value: 0,
      animationDuration: 500,
      animationRule: "linear"
    }).draw();

    const humGauge = new RadialGauge({
      renderTo: 'humGauge',
      width: 200,
      height: 200,
      units: "%",
      minValue: 0,
      maxValue: 100,
      majorTicks: ["0","20","40","60","80","100"],
      minorTicks: 2,
      strokeTicks: true,
      highlights: [
        { from: 0, to: 40, color: "rgba(255,30,0,.3)" },
        { from: 40, to: 70, color: "rgba(0,255,0,.3)" },
        { from: 70, to: 100, color: "rgba(0,0,255,.3)" }
      ],
      value: 0,
      animationDuration: 500,
      animationRule: "linear"
    }).draw();

    const voltGauge = new RadialGauge({
      renderTo: 'voltGauge',
      width: 200,
      height: 200,
      units: "V",
      minValue: 0,
      maxValue: 20,
      majorTicks: ["0","5","10","15","20"],
      minorTicks: 2,
      strokeTicks: true,
      highlights: [
        { from: 0, to: 10, color: "rgba(255,30,0,.3)" },
        { from: 10, to: 15, color: "rgba(255,255,0,.3)" },
        { from: 15, to: 20, color: "rgba(0,255,0,.3)" }
      ],
      value: 0,
      animationDuration: 500,
      animationRule: "linear"
    }).draw();

    // H√†m update gi√° tr·ªã random (test hi·ªÉn th·ªã gauge)
    function updateGauges() {
      tempGauge.value = Math.floor(Math.random() * 100);
      humGauge.value = Math.floor(Math.random() * 100);
      voltGauge.value = (Math.random() * 20).toFixed(1);
    }

    // C·∫≠p nh·∫≠t m·ªói 5 gi√¢y
    setInterval(updateGauges, 5000);

    // G·ªçi 1 l·∫ßn khi load trang
    updateGauges();
  </script>
</body>
</html>
